{
  "filename": "docker-jenkins.md",
  "__html": "<h1>Docker部署Jenkins</h1>\n<h2>Jenkins简介</h2>\n<p>Jenkins是开源CI&amp;CD软件领导者，提供超过1000个插件来支持构建、部署、自动化，满足任何项目的需要。我们可以用Jenkins来构建和部署我们的项目，比如说从我们的代码仓库获取代码，然后将我们的代码打包成可执行的文件，之后通过远程的ssh工具执行脚本来运行我们的项目。</p>\n<h2>Jenkins的安装及配置</h2>\n<h3>Docker环境下的安装</h3>\n<ul>\n<li>下载Jenkins的Docker镜像：</li>\n</ul>\n<pre><code class=\"language-shell\">docker pull jenkins/jenkins:lts\n</code></pre>\n<ul>\n<li>在Docker容器中运行Jenkins：</li>\n</ul>\n<pre><code class=\"language-shell\">docker run -p 8080:8080 -p 50000:50000 --name jenkins \\\n-u root \\\n-v /etc/localtime:/etc/localtime \\\n-v /data/jenkins_home:/var/jenkins_home \\\n-e JAVA_OPTS=-Duser.timezone=Asia/Shanghai \\\n-d jenkins/jenkins:lts\n</code></pre>\n<ul>\n<li>echo 'Asia/Shanghai' &gt;/etc/timezone</li>\n</ul>\n<h3>Jenkins的配置</h3>\n<ul>\n<li>运行成功后访问该地址登录Jenkins，第一次登录需要输入管理员密码：<a href=\"http://localhost:8080/\">http://localhost:8080/</a></li>\n</ul>\n<p><img src=\"./../img/jenkins-1.png\" alt=\"jenkins\"></p>\n<ul>\n<li>使用管理员密码进行登录，可以使用以下命令从容器启动日志中获取管理密码：</li>\n</ul>\n<pre><code class=\"language-shell\">docker logs jenkins\n</code></pre>\n<p><img src=\"./../img/jenkins-2.png\" alt=\"jenkins\"></p>\n<ul>\n<li>选择安装插件方式，这里我们直接安装推荐的插件：</li>\n</ul>\n<p><img src=\"./../img/jenkins-3.png\" alt=\"jenkins\"></p>\n<ul>\n<li>进入插件安装界面，联网等待插件安装：</li>\n</ul>\n<p><img src=\"./../img/jenkins-4.png\" alt=\"jenkins\"></p>\n<ul>\n<li>安装完成后，创建管理员账号：</li>\n</ul>\n<p><img src=\"./../img/jenkins-5.png\" alt=\"jenkins\"></p>\n<ul>\n<li>进行实例配置，配置Jenkins的URL：</li>\n</ul>\n<p><img src=\"./../img/jenkins-6.png\" alt=\"jenkins\"></p>\n<ul>\n<li>点击系统管理-&gt;插件管理，进行一些自定义的插件安装：</li>\n</ul>\n<p><img src=\"./../img/jenkins-7.png\" alt=\"jenkins\"></p>\n<ul>\n<li>\n<p>确保以下插件被正确安装：</p>\n<ol>\n<li>根据角色管理权限的插件：Role-based Authorization Strategy</li>\n<li>远程使用ssh的插件：SSH plugin</li>\n</ol>\n</li>\n<li>\n<p>通过系统管理-&gt;全局工具配置来进行全局工具的配置，比如maven的配置：</p>\n</li>\n</ul>\n<p><img src=\"./../img/jenkins-8.png\" alt=\"jenkins\"></p>\n<ul>\n<li>新增maven的安装配置：</li>\n</ul>\n<p><img src=\"./../img/jenkins-9.png\" alt=\"jenkins\"></p>\n<ul>\n<li>在系统管理-&gt;系统配置中添加全局ssh的配置，这样Jenkins使用ssh就可以执行远程的linux脚本了：</li>\n</ul>\n<p><img src=\"./../img/jenkins-10.png\" alt=\"jenkins\"></p>\n<h2>角色权限管理</h2>\n<p>我们可以使用Jenkins的角色管理插件来管理Jenkins的用户，比如我们可以给管理员赋予所有权限，运维人员赋予执行任务的相关权限，其他人员只赋予查看权限。</p>\n<ul>\n<li>在系统管理-&gt;全局安全配置中启用基于角色的权限管理：</li>\n</ul>\n<p><img src=\"./../img/jenkins-11.png\" alt=\"jenkins\"></p>\n<ul>\n<li>进入系统管理-&gt;Manage and Assign Roles界面：</li>\n</ul>\n<p><img src=\"./../img/jenkins-12.png\" alt=\"jenkins\"></p>\n<ul>\n<li>添加角色与权限的关系：</li>\n</ul>\n<p><img src=\"./../img/jenkins-13.png\" alt=\"jenkins\"></p>\n<ul>\n<li>给用户分配角色：</li>\n</ul>\n<p><img src=\"./../img/jenkins-14.png\" alt=\"jenkins\"></p>\n",
  "link": "\\zh-cn\\blog\\docker\\docker-jenkins.html",
  "meta": {}
}